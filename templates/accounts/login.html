{% extends 'common/base.html' %}

{% load static %}

{% block title %}
    Login | eMobilis shop
{% endblock %}


{% block content %}
<!-- The messages -->


<!-- To let the message disappear after a few seconds -->

<!-- Content -->
    <div class="container">
        <div class="row">
            <div class="col-lg-6 offset-lg-3">
                <div class="card">
                    <div class="card-body">
                        <img class="img-fluid mx-auto d-block mb-5 img rounded" src="{% static 'images/logos/eMobilis_shop.jpg' %}" style="height: fit-content; width: 200px;" alt="KAFU Logo">
                        <h2 class="text-center mb-4">Login</h2>
                        <form method="post">
                            <!-- To handle errors -->
                            {% if form.errors %}
                            <div class="alert alert-danger"> 
                                {% for error in form.errors %}
                                    <strong>Invalid username or password</strong><br>Please try again
                                {% endfor %}  
                            </div>
                            {% endif %}

                            {% csrf_token %}
                            <div class="form-group">
                                <label for="username">Username</label>
                                <input type="text" class="form-control" name="username" id="id_username" placeholder="Enter your username" required>
                            </div>
                            <div class="form-group">
                                <label for="password">Password</label>
                                <input type="password" class="form-control" name="password" id="id_password" placeholder="Enter your password" required>
                            </div>
                            <div class="form-group form-check">
                                <input type="checkbox" class="form-check-input" id="rememberMe">
                                <label class="form-check-label" for="rememberMe">Remember me</label>
                            </div>
                            <div class="text-center">
                                <button type="submit" class="btn btn-primary">Login</button>
                            </div>
                        </form>
                        <p class="mt-3 text-center">Don't have an account? <a href="{% url 'accounts:register' %}">Register here</a></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Script -->
    <script>
        $(document).ready(function () {
            // Check if the "Remember me" preference exists in the browser's local storage
            if (localStorage.getItem('rememberMe') === 'true') {
                $('#rememberMe').prop('checked', true);
            }

            // Save the "Remember me" preference to local storage when the checkbox is clicked
            $('#rememberMe').on('change', function () {
                localStorage.setItem('rememberMe', this.checked);
            });
        });
    </script>
    <!-- End of script -->

<!-- End of content -->
{% endblock %}
